<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Search for tokens. — getMatches • nzilbb.labbcat</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Search for tokens. — getMatches"><meta property="og:description" content="Searches through transcripts for tokens matching the given pattern."><meta property="og:image" content="/logo.png"><meta name="twitter:card" content="summary"><meta name="twitter:creator" content="@labbcat"><meta name="twitter:site" content="@labbcat"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">nzilbb.labbcat</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.1-0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/examples/forced-alignment-comparison.html">Forced Alignment Comparison</a>
    </li>
    <li>
      <a href="../articles/examples/search-labels-alignments-praat-script.html">Search, Annotation, and Praat Script Example</a>
    </li>
    <li>
      <a href="../articles/examples/search-labels-alignments-r-script.html">Search, Annotation, and R Script Example</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"></ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Search for tokens.</h1>
    
    <div class="hidden name"><code>getMatches.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Searches through transcripts for tokens matching the given pattern.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">getMatches</span><span class="op">(</span>
  <span class="va">labbcat.url</span>,
  <span class="va">pattern</span>,
  participant.ids <span class="op">=</span> <span class="cn">NULL</span>,
  transcript.types <span class="op">=</span> <span class="cn">NULL</span>,
  main.participant <span class="op">=</span> <span class="cn">TRUE</span>,
  aligned <span class="op">=</span> <span class="cn">FALSE</span>,
  matches.per.transcript <span class="op">=</span> <span class="cn">NULL</span>,
  words.context <span class="op">=</span> <span class="fl">0</span>,
  max.matches <span class="op">=</span> <span class="cn">NULL</span>,
  overlap.threshold <span class="op">=</span> <span class="cn">NULL</span>,
  page.length <span class="op">=</span> <span class="fl">1000</span>,
  no.progress <span class="op">=</span> <span class="cn">FALSE</span>
<span class="op">)</span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>labbcat.url</dt>
<dd><p>URL to the LaBB-CAT instance</p></dd>
<dt>pattern</dt>
<dd><p>An object representing the pattern to search for.</p>
<p>Strictly speaking, this should be a named list that replicates the structure of the
    `search matrix' in the LaBB-CAT browser interface, with one element called
    ``columns'', containing a named list for each column.</p>
<p>Each element in the ``columns'' named list contains an element named ``layers'', whose
    value is a named list for patterns to match on each layer, and optionally an
    element named ``adj'', whose value is a number representing the maximum distance, in
    tokens, between this column and the next column - if ``adj'' is not specified, the
    value defaults to 1, so tokens are contiguous.</p>
<p>Each element in the ``layers'' named list is named after the layer it matches, and the
    value is a named list with the following possible elements:</p><ul><li><p><em>pattern</em>  A regular expression to match against the label</p></li>
<li><p><em>min</em>  An inclusive minimum numeric value for the label</p></li>
<li><p><em>max</em>  An exclusive maximum numeric value for the label</p></li>
<li><p><em>not</em>  TRUE to negate the match</p></li>
<li><p><em>anchorStart</em>  TRUE to anchor to the start of the annotation on this layer
    (i.e. the matching word token will be the first at/after the start of the matching
    annotation on this layer)</p></li>
<li><p><em>anchorEnd</em>  TRUE to anchor to the end of the annotation on this layer
    (i.e. the matching word token will be the last before/at the end of the matching
    annotation on this layer)</p></li>
<li><p><em>target</em>  TRUE to make this layer the target of the search; the results will
    contain one row for each match on the target layer</p></li>
</ul><p>Examples of valid pattern objects include:</p><div class="sourceCode"><pre><code>
## words starting with 'ps...'
pattern &lt;- list(columns = list(
    list(layers = list(
           orthography = list(pattern = "ps.*")))))

## the word 'the' followed immediately or with one intervening word by
## a hapax legomenon (word with a frequency of 1) that doesn't start with a vowel
pattern &lt;- list(columns = list(
    list(layers = list(
           orthography = list(pattern = "the")),
         adj = 2),
    list(layers = list(
           phonemes = list(not = TRUE, pattern = "[cCEFHiIPqQuUV0123456789~#\$@].*"),
           frequency = list(max = "2")))))
</code></pre></div><p>For ease of use, the function will also accept the following abbreviated forms:</p>
<div class="sourceCode"><pre><code>
## a single list representing a 'one column' search, 
## and string values, representing regular expression pattern matching
pattern &lt;- list(orthography = "ps.*")

## a list containing the columns (adj defaults to 1, so matching tokens are contiguous)...
pattern &lt;- list(
    list(orthography = "the"),
    list(phonemes = list(not = TRUE, pattern = "[cCEFHiIPqQuUV0123456789~#\$@].*"),
         frequency = list(max = "2")))
</code></pre></div></dd>
<dt>participant.ids</dt>
<dd><p>An optional list of participant IDs to search the utterances of. If
not supplied, all utterances in the corpus will be searched.</p></dd>
<dt>transcript.types</dt>
<dd><p>An optional list of transcript types to limit the results
to. If null, all transcript types will be searched.</p></dd>
<dt>main.participant</dt>
<dd><p>TRUE to search only main-participant utterances, FALSE to
search all utterances.</p></dd>
<dt>aligned</dt>
<dd><p>true to include only words that are aligned (i.e. have anchor
confidence &amp;ge; 50, false to search include un-aligned words as well.</p></dd>
<dt>matches.per.transcript</dt>
<dd><p>Optional maximum number of matches per transcript to
return. NULL means all matches.</p></dd>
<dt>words.context</dt>
<dd><p>Number of words context to include in the `Before.Match' and
`After.Match' columns in the results.</p></dd>
<dt>max.matches</dt>
<dd><p>The maximum number of matches to return, or null to return all.</p></dd>
<dt>overlap.threshold</dt>
<dd><p>The percentage overlap with other utterances before
simultaneous speech is excluded, or null to include overlapping speech.</p></dd>
<dt>page.length</dt>
<dd><p>In order to prevent timeouts when there are a large number of
matches or the network connection is slow, rather than retrieving matches in one
big request, they are retrieved using many smaller requests. This parameter
controls the number of results retrieved per request.</p></dd>
<dt>no.progress</dt>
<dd><p>TRUE to supress visual progress bar. Otherwise, progress bar will be
shown when interactive().</p></dd>
</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>A data frame identifying matches, containing the following columns:</p><ul><li><p><em>SearchName</em> A name based on the pattern -- the same for all rows</p></li>
<li><p><em>MatchId</em> A unique ID for the matching target token</p></li>
<li><p><em>Transcript</em> Name of the transcript in which the match was found</p></li>
<li><p><em>Participant</em> Name of the speaker</p></li>
<li><p><em>Corpus</em> The corpus of the transcript</p></li>
<li><p><em>Line</em> The start offset of the utterance/line</p></li>
<li><p><em>LineEnd</em> The end offset of the utterance/line</p></li>
<li><p><em>Before.Match</em> Transcript text immediately before the match</p></li>
<li><p><em>Text</em> Transcript text of the match</p></li>
<li><p><em>After.Match</em> Transcript text immediately after the match</p></li>
<li><p><em>Number</em> Row number</p></li>
<li><p><em>URL</em> URL of the first matching word token</p></li>
<li><p><em>Target.word</em> Text of the target word token</p></li>
<li><p><em>Target.word.start</em> Start offset of the target word token</p></li>
<li><p><em>Target.word.end</em> End offset of the target word token</p></li>
<li><p><em>Target.segment</em> Label of the target segment (only present if the segment
    layer is included in the pattern)</p></li>
<li><p><em>Target.segment.start</em> Start offset of the target segment (only present if the
    segment layer is included in the pattern)</p></li>
<li><p><em>Target.segment.end</em> End offset of the target segment (only present if the
    segment layer is included in the pattern)</p></li>
</ul></div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="getParticipantIds.html">getParticipantIds</a></code></p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span>
<span class="r-in"><span class="co">## define the LaBB-CAT URL</span></span>
<span class="r-in"><span class="va">labbcat.url</span> <span class="op">&lt;-</span> <span class="st">"https://labbcat.canterbury.ac.nz/demo/"</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co">## create a pattern object to match against</span></span>
<span class="r-in"><span class="va">pattern</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>columns <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span class="r-in">    <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>layers <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span class="r-in">           orthography <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>pattern <span class="op">=</span> <span class="st">"the"</span><span class="op">)</span><span class="op">)</span>,</span>
<span class="r-in">         adj <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>,</span>
<span class="r-in">    <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>layers <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span class="r-in">           phonemes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>not<span class="op">=</span><span class="cn">TRUE</span>, pattern <span class="op">=</span> <span class="st">"[cCEFHiIPqQuUV0123456789~#\\$@].*"</span><span class="op">)</span>,</span>
<span class="r-in">           frequency <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>max <span class="op">=</span> <span class="st">"2"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co">## get the tokens matching the pattern, excluding overlapping speech</span></span>
<span class="r-in"><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu">getMatches</span><span class="op">(</span><span class="va">labbcat.url</span>, <span class="va">pattern</span>, overlap.threshold <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co">## results$MatchId can be used to access results</span></span>
<span class="r-in"><span class="op">}</span></span>
<span class="r-in"></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><style type="text/css">
  footer img {
      vertical-align: middle;
      height: 40px;
      display: inline-block;
  }
</style><small><a rel="license" href="http://creativecommons.org/licenses/by-sa/2.0/" class="external-link"><img alt="CC-BY-SA Creative Commons Licence " src="https://nzilbb.github.io/labbcat-R/cc-by-sa.svg" title="This work is licensed under a Creative Commons Attribution-ShareAlike 2.0 Generic License"></a><a rel="author" href="https://www.canterbury.ac.nz/nzilbb/" class="external-link"><img src="https://nzilbb.github.io/labbcat-R/nzilbb.svg" alt="Te Kāhui Roro Reo | The New Zealand Institute of Language, Brain and Behaviour" title="🄯 2021 NZILBB"></a></small>

      </footer></div>

  


  

  </body></html>

